!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["xstate.graph"]=e():t["xstate.graph"]=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,r){"use strict";function n(t){var e=t.states;return Object.keys(e).reduce(function(t,r){var o=e[r],i=n(e[r]);return t.push.apply(t,[o].concat(i)),t},[])}function o(t){return"string"==typeof t?[t]:Object.keys(t)}function i(t,e){void 0===e&&(e={});var r=t.states;e[t.key]=!0;var n=Object.keys(r).reduce(function(t,n){if(e[n])return t;var o=r[n];return t.push.apply(t,i(o,e)),e[n]=!0,t},[]);if(!t.on)return n;var a=Object.keys(t.on).reduce(function(r,n){if(!t.on||!t.parent)return r;var a=t.parent;return o(t.on[n]).forEach(function(o){var u=a.getState(o),s={action:n,source:t,target:u};r.push(s),e[o]||(r.push.apply(r,i(u,e)),e[o]=!0)}),r},[]);return n.concat(a)}function a(t){var e=t.parent?{}:void 0,r={};if(t.on)for(var n=0,i=Object.keys(t.on);n<i.length;n++){var u=i[n];if(t.parent&&e){var s=t.on[u],p=o(s);if(p.length){var l=t.parent.getState(p[0]),v=l.id;l.initial&&(v+="."+l.initial),e[u]=v}}}if(e&&(r[t.id]=e),t.states)for(var h=0,y=Object.keys(t.states);h<y.length;h++){var d=y[h],g=t.states[d],b=f.mapValues(a(g),function(t){return c({},e,t)});Object.assign(r,b)}return r}function u(t){if(t.states&&t.initial){var e=a(t),r=t.states[t.initial].id,n=(o={},o[r]=[],o);return s(e,r,n),n;var o}}function s(t,e,r,n){void 0===n&&(n=new Set),n.add(e);for(var o=t[e],i=0,a=Object.keys(o);i<a.length;i++){var u=a[i],c=o[u];(!r[c]||r[c].length>r[e].length+1)&&(r[c]=r[e].concat([e]))}for(var f=0,p=Object.keys(o);f<p.length;f++){var u=p[f],c=o[u];n.has(c)||s(t,c,r,n)}return r}var c=this&&this.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,"__esModule",{value:!0});var f=r(1);e.getNodes=n,e.getEdges=i,e.getAdjacencyMap=a,e.getShortestPaths=u},function(t,e,r){"use strict";function n(t){try{return"string"==typeof t||"number"==typeof t?""+t:t.type}catch(t){throw new Error("Actions must be strings or objects with a string action.type.")}}function o(t){try{return Array.isArray(t)?t:t.toString().split(".")}catch(e){throw new Error("'"+t+"' is not a valid state path.")}}function i(t){if("object"==typeof t&&!(t instanceof u.default))return t;var e=o(t);if(1===e.length)return e[0];for(var r={},n=r,i=0;i<e.length-1;i++)i===e.length-2?n[e[i]]=e[i+1]:(n[e[i]]={},n=n[e[i]]);return r}function a(t,e){var r={};return Object.keys(t).forEach(function(n){r[n]=e(t[n],n,t)}),r}Object.defineProperty(e,"__esModule",{value:!0});var u=r(3);e.getActionType=n,e.toStatePath=o,e.toTrie=i,e.mapValues=a},function(t,e,r){r(0),t.exports=r(0)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4),o=r(1),i=function(){function t(t,e,r){this.value=t,this.history=e,this.effects=r}return t.from=function(e){return e instanceof t?e:new t(o.toTrie(e))},t.prototype.toString=function(){if("string"==typeof this.value)return this.value;for(var t=[],e=this.value;;){if("string"==typeof e){t.push(e);break}var r=Object.keys(e),o=r[0];if(r.slice(1).length)return;t.push(o),e=e[o]}return t.join(n.STATE_DELIMITER)},t}();e.default=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.STATE_DELIMITER="."}])});